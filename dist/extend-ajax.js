!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.extendAjax=e():t.extendAjax=e()}(this,(function(){return(()=>{var t={831:(t,e,o)=>{var n=o(311).Symbol;t.exports=n},648:(t,e,o)=>{var n=o(831),r=o(20),i=o(825),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?r(t):i(t)}},884:(t,e,o)=>{var n="object"==typeof o.g&&o.g&&o.g.Object===Object&&o.g;t.exports=n},20:(t,e,o)=>{var n=o(831),r=Object.prototype,i=r.hasOwnProperty,a=r.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var e=i.call(t,s),o=t[s];try{t[s]=void 0;var n=!0}catch(t){}var r=a.call(t);return n&&(e?t[s]=o:delete t[s]),r}},825:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},311:(t,e,o)=>{var n=o(884),r="object"==typeof self&&self&&self.Object===Object&&self,i=n||r||Function("return this")();t.exports=i},469:t=>{var e=Array.isArray;t.exports=e},814:(t,e,o)=>{var n=o(648),r=o(667);t.exports=function(t){if(!r(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},362:(t,e,o)=>{var n=o(648),r=o(880);t.exports=function(t){return"number"==typeof t||r(t)&&"[object Number]"==n(t)}},667:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},880:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},712:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>E});var n=o(814),r=o.n(n),i=o(362),a=o.n(i),s=o(667),c=o.n(s),u=o(469),l=o.n(u),p={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript",json:"application/json",text:"text/plain",_default:"*/*"},f={html:"text/html",json:"application/json",file:"multipart/form-data",text:"text/plain",form:"application/x-www-form-urlencoded",_default:"application/x-www-form-urlencoded"},h={timeout:!1,isAsync:!0,header:{Accept:p._default,"Content-Type":f._default},charset:"utf-8",host:"",cacheSize:0,cacheExp:3e5,jsonpName:"jsonpCallback",jsonpParam:"callback",autoAbort:!1};function d(t){if(!/^\w+(-\w+)+/.test(t))return t;var e=t.split("-");return e.forEach((function(t,o){e[o]=t.replace(/^\w/,(function(t){return t.toUpperCase()}))})),e.join("-")}function v(t){for(var e in t){var o=t[e];delete t[e],t[d(e)]=o}}function y(t){for(var e in t){var o=t[e];"Content-Type"===e&&(t[e]=f[o]||o),"Accept"===e&&(t[e]=p[o]||o)}}var m=function(t,e,o){for(var n in void 0===o&&(o=""),e){var r=e[n];null!=r&&(c()(r)||l()(r)?m(t,r,n):t.push({key:o+n,val:r}))}};function b(t){var e=[],o="";return m(e,t),e.sort((function(t,e){return t.key>e.key?1:t.key===e.key?0:-1})),e.forEach((function(t){var e=t.key,n=t.val;o+=e+"="+n})),o}var x={"application/json":function(t){return c()(t)?JSON.stringify(t):""},"text/plain":function(t){return"string"==typeof t?t:""},"application/x-www-form-urlencoded":function(t){if(!c()(t))return"";var e="";for(var o in t){var n=t[o];void 0!==n&&(e+="&"+o+"="+encodeURI(n))}return e.substring(1)},formData:function(t){var e=new FormData;if(!c()(t))return e;for(var o in t){var n=t[o];if(n instanceof FileList)for(var r=0;r<n.length;r++)e.append(o,n[r]);else void 0!==n&&e.append(o,n)}return e}};const j=function(t,e,o){return void 0===e&&(e="application/x-www-form-urlencoded"),"get"===o&&(e="text/plain"),f[e]&&(e=f[e]),x[e]?x[e](t):""};var w=[],g="";const S=function(t){var e=window.location.href;g&&e!==g&&w.length&&(w.forEach((function(t){t.abort()})),w=[]),w.push(t),g=e;var o=w.length-1;t.on("end",(function(){w.splice(o,1)}))};var C=function(){return(C=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},O=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)n[r]=i[a];return n},T=window,k=function(){function t(e){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];this.options={},this.events={},this.pool=[];var r={};o[1]?(r=o[1],this.method=o[0]):"string"==typeof o[0]?(this.method=o[0],r={}):(this.method="get",r=o[0]),this.url=e,this.xhr="jsonp"===this.method?null:this.getXHR(),this.options=C(C({},t.options),r),this.options.header&&(v(this.options.header),y(this.options.header))}return t.prototype.verifyCache=function(e,o){return e&&t.options.cacheSize&&(e.exp+e.time<+new Date||t.cacheCurSize>t.options.cacheSize)?(delete t.cache[o],--t.cacheCurSize,!1):!(!e||0===t.options.cacheSize)},t.prototype.addXHREventListener=function(e){var o=this,n=this.options,i=n.convert,s=n.timeout,c=n.query,u=n.header,l={};e.onreadystatechange=function(){var n=e.readyState,p=e.status;if(l.status=p,1===n)return o.emit("start"),void(a()(s)&&(o.timer=window.setTimeout((function(){l.error=new Error("request timeout"),o.emit("timeout")}),s)));if(4===n)if(4===n&&(l.header=function(t){var e=t.getAllResponseHeaders().split("\n"),o={};return e.pop(),e.forEach((function(t){var e=t.replace(" ","").split(":");o[e[0].toLowerCase()]=e[1]})),o}(e),l.data=r()(i)?i(e.responseText):e.responseText),p>=200&&p<300||304===p){var f=b({body:o.data,query:c,header:u,url:o.url});if(!t.cache[f]&&t.options.cacheExp&&t.options.cacheSize&&t.options.cacheSize>0&&(t.cache[f]={res:l,exp:t.options.cacheExp,time:+new Date},++t.cacheCurSize,t.cacheCurSize>t.options.cacheSize)){var h=Object.keys(t.cache)[0];delete t.cache[h]}o.emit("success",l)}else l.error=new Error("request fail:"+p),o.emit("fail",l)}},t.prototype.sendJSONP=function(t){var e=this,o=this.script=document.createElement("script"),n=this.options,r=n.timeout,i=n.jsonpName,a=void 0===i?"jsonpCallback":i;o.src=t,o.type="text/javascript",r&&(this.timer=window.setTimeout((function(){e.timer=o.onload=o.onerror=null,document.body.removeChild(o),e.emit("timeout")}),r)),this.emit("start"),T[a]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];o.setAttribute("data-load","true"),e.emit.apply(e,O(["success"],t)),T[a]=null,clearTimeout(e.timer)},o.onload=function(){o.getAttribute("data-load")||(e.emit("fail"),o.onerror=null,document.body.removeChild(o)),o.onload=null},o.onerror=function(){e.emit("fail"),clearTimeout(e.timer),T[a]=null,document.body.removeChild(o)},document.body.append(o)},t.prototype.getXHR=function(){return this.pool.shift()||new XMLHttpRequest},t.prototype.emit=function(t){for(var e,o,n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(this.promise)switch(t){case"success":null===(e=this.resolve)||void 0===e||e.apply(this.options.scope,r||[]);break;case"fail":null===(o=this.reject)||void 0===o||o.apply(this.options.scope,r||[])}var a=this.events[t];a&&a.forEach((function(t){t.apply(n.options.scope||null,r)}))},t.prototype.on=function(t,e){var o=this.events[t];o?o.push(e):this.events[t]=[e]},t.prototype.send=function(e){return o=this,n=void 0,i=function(){var o,n,r,i,a,s,c,u,l,p,f,h,d,v,y,m,x,w=this;return function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(g){return this.data=e,this.promise=new Promise((function(t,e){w.resolve=t,w.reject=e,w.xhr&&w.addXHREventListener(w.xhr)})),this.emit("beforeSend",this.options),o=this.options,n=o.header,r=o.withCredentials,i=o.isAsync,a=void 0===i||i,s=o.charset,c=void 0===s?"utf-8":s,u=o.jsonpName,l=void 0===u?"jsonpCallback":u,p=o.jsonpParam,f=void 0===p?"callback":p,h=o.host,d=(void 0===h?"":h)+this.url,v=this.options.query,this.xhr?(y=b({body:e,query:v,header:n,url:this.url}),"get"===this.method&&"object"==typeof e&&(v=C(C({},v),e)),m=t.cache[y],this.verifyCache(m,y)?this.emit("success",m.res):(v&&(d+="?"+j(v)),x="get"===this.method?j(e):j(e,n&&n["Content-Type"]),this.xhr.open(this.method,d,a),this.xhr.withCredentials=!!r,function(t,e,o){for(var n in e){var r=e[n];"formData"!==r&&"Content-Type"===n&&(r+=";charset="+o),"Content-Type"===n&&"formData"===r||t.setRequestHeader(n,r)}}(this.xhr,n||{},c),this.xhr.send(x))):(d+="?"+f+"="+l,this.sendJSONP(d)),[2,this.promise]}))},new((r=void 0)||(r=Promise))((function(t,e){function a(t){try{c(i.next(t))}catch(t){e(t)}}function s(t){try{c(i.throw(t))}catch(t){e(t)}}function c(e){var o;e.done?t(e.value):(o=e.value,o instanceof r?o:new r((function(t){t(o)}))).then(a,s)}c((i=i.apply(o,n||[])).next())}));var o,n,r,i},t.prototype.abort=function(){if(this.xhr)this.xhr.abort(),this.emit("abort");else if("jsonp"===this.method){var t=this.options.jsonpName;t&&T[t]&&(T[t]=null),this.script&&(document.body.removeChild(this.script),delete this.script),this.emit("abort")}},t.options=h,t.cache={},t.cacheCurSize=0,t}(),A=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=new(k.bind.apply(k,O([void 0,t],e)));return n.on("beforeSend",(function(t){t.autoAbort&&S(n)})),n};A.config=function(t){Object.assign(k.options,t)};const E=A}},e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={exports:{}};return t[n](r,r.exports,o),r.exports}return o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o(712)})()}));