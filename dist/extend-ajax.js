!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.extendAjax=e():t.extendAjax=e()}(this,(function(){return(()=>{var t={831:(t,e,o)=>{var n=o(311).Symbol;t.exports=n},648:(t,e,o)=>{var n=o(831),r=o(20),i=o(825),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?r(t):i(t)}},884:(t,e,o)=>{var n="object"==typeof o.g&&o.g&&o.g.Object===Object&&o.g;t.exports=n},20:(t,e,o)=>{var n=o(831),r=Object.prototype,i=r.hasOwnProperty,a=r.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var e=i.call(t,s),o=t[s];try{t[s]=void 0;var n=!0}catch(t){}var r=a.call(t);return n&&(e?t[s]=o:delete t[s]),r}},825:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},311:(t,e,o)=>{var n=o(884),r="object"==typeof self&&self&&self.Object===Object&&self,i=n||r||Function("return this")();t.exports=i},469:t=>{var e=Array.isArray;t.exports=e},814:(t,e,o)=>{var n=o(648),r=o(667);t.exports=function(t){if(!r(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},362:(t,e,o)=>{var n=o(648),r=o(880);t.exports=function(t){return"number"==typeof t||r(t)&&"[object Number]"==n(t)}},667:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},880:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},578:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>g});var n=o(814),r=o.n(n),i=o(362),a=o.n(i),s=o(667),c=o.n(s),u=o(469),l=o.n(u),p={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript",json:"application/json",text:"text/plain",_default:"*/*"},f={html:"text/html",json:"application/json",file:"multipart/form-data",text:"text/plain",form:"application/x-www-form-urlencoded",_default:"application/x-www-form-urlencoded"},h={timeout:!1,isAsync:!0,header:{Accept:p._default,"Content-Type":f._default},charset:"utf-8",host:"",cacheSize:0,cacheExp:300,jsonpName:"jsonpCallback",jsonpParam:"callback"};function d(t){if(!/^\w+(-\w+)+/.test(t))return t;var e=t.split("-");return e.forEach((function(t,o){e[o]=t.replace(/^\w/,(function(t){return t.toUpperCase()}))})),e.join("-")}function v(t){for(var e in t){var o=t[e];delete t[e],t[d(e)]=o}}function m(t){for(var e in t){var o=t[e];"Content-Type"===e&&(t[e]=f[o]||o),"Accept"===e&&(t[e]=p[o]||o)}}var y=function(t,e,o){for(var n in void 0===o&&(o=""),e){var r=e[n];null!=r&&(c()(r)||l()(r)?y(t,r,n):t.push({key:o+n,val:r}))}};function b(t){var e=[],o="";return y(e,t),e.sort((function(t,e){return t.key>e.key?1:t.key===e.key?0:-1})),e.forEach((function(t){var e=t.key,n=t.val;o+=e+"="+n})),o}var x={"application/json":function(t){return c()(t)?JSON.stringify(t):""},"text/plain":function(t){return"string"==typeof t?t:""},"application/x-www-form-urlencoded":function(t){if(!c()(t))return"";var e="";for(var o in t){var n=t[o];void 0!==n&&(e+="&"+o+"="+encodeURI(n))}return e.substring(1)},formData:function(t){var e=new FormData;if(!c()(t))return e;for(var o in t){var n=t[o];if(n instanceof FileList)for(var r=0;r<n.length;r++)e.append(o,n[r]);else void 0!==n&&e.append(o,n)}return e}};const w=function(t,e){return void 0===e&&(e="application/x-www-form-urlencoded"),x[e]?x[e](t):""};var j=function(){function t(e){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];this.options={},this.events={},this.pool=[];var r={};o[1]?(r=o[1],this.method=o[0]):(r=o[0],this.method="post"),this.options.header&&(v(this.options.header),m(this.options.header)),this.url=e,this.xhr="jsonp"===this.method?null:this.getXHR(),this.options=Object.assign({},t.options,r)}return t.prototype.verifyCache=function(e,o){return e&&t.options.cacheSize&&(e.exp+e.time<+new Date||t.cacheCurSize>t.options.cacheSize)?(delete t.cache[o],--t.cacheCurSize,!1):!!e},t.prototype.addXHREventListener=function(e){var o=this,n=this.options.convert,i={};e.onreadystatechange=function(){var s=e.readyState,c=e.status;if(i.status=c,1===s)return o.emit("start"),void(a()(o.options.timeout)&&(o.timer=window.setTimeout((function(){i.error=new Error("request timeout"),o.emit("timeout")}),o.options.timeout)));if(4===s&&(i.header=function(t){var e=t.getAllResponseHeaders().split("\n"),o={};return e.pop(),e.forEach((function(t){var e=t.replace(" ","").split(":");o[e[0].toLowerCase()]=e[1]})),o}(e),i.data=r()(n)?n(e.responseText):e.responseText),c>=200&&c<300||304===c){var u=b({body:o.data,query:o.options.query,header:o.options.header,url:o.url});!t.cache[u]&&o.options.cacheExp&&(t.cache[u]={res:i,exp:1e3*o.options.cacheExp,time:+new Date},++t.cacheCurSize),o.emit("success",i)}else i.error=new Error("request fail:"+c),o.emit("fail",i)}},t.prototype.sendJSONP=function(t){var e=this,o=document.createElement("script"),n=window,r=this.options,i=r.timeout,a=r.jsonpName,s=void 0===a?"jsonpCallback":a;o.src=t,o.type="text/javascript",i&&(this.timer=window.setTimeout((function(){e.timer=o.onload=o.onerror=null,document.body.removeChild(o),e.emit("timeout")}),i)),this.emit("start"),n[s]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];o.setAttribute("data-load","true"),e.emit("success",t)},o.onload=function(){o.getAttribute("data-load")||(e.emit("fail"),o.onerror=null,document.body.removeChild(o)),o.onload=null,clearTimeout(e.timer),n[s]=null},o.onerror=function(){e.emit("fail"),clearTimeout(e.timer),n[s]=null,document.body.removeChild(o)},document.body.append(o)},t.prototype.getXHR=function(){return this.pool.shift()||new XMLHttpRequest},t.prototype.emit=function(t){for(var e,o,n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(this.promise)switch(t){case"success":null===(e=this.resolve)||void 0===e||e.apply(this.options.scope,r||[]);break;case"fail":null===(o=this.reject)||void 0===o||o.apply(this.options.scope,r||[])}var a=this.events[t];a&&a.forEach((function(t){t.call(n.options.scope||null,r)}))},t.prototype.on=function(t,e){var o=this.events[t];o?o.push(e):this.events[t]=[e]},t.prototype.send=function(e){var o,n,r,i,a;return n=this,r=void 0,a=function(){var n,r,i,a,s,c,u,l,p,f,h,d,v,m,y,x,j=this;return function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(g){return this.data=e,this.promise=new Promise((function(t,e){j.resolve=t,j.reject=e,j.xhr&&j.addXHREventListener(j.xhr)})),n=this.options,r=n.query,i=n.header,a=n.withCredentials,s=n.isAsync,c=void 0===s||s,u=n.charset,l=void 0===u?"utf-8":u,p=n.jsonpName,f=void 0===p?"jsonpCallback":p,h=n.jsonpParam,d=void 0===h?"callback":h,v=null!==(o=this.options.host)&&void 0!==o?o:""+this.url,this.xhr?(m=b({body:e,query:r,header:i,url:this.url}),y=t.cache[m],this.verifyCache(y,m)?this.emit("success",y.res):(r&&(v+="?"+w(r)),x="get"===this.method?w(e):w(e,i&&i["Content-Type"]),this.xhr.open(this.method,v,c),this.xhr.withCredentials=!!a,function(t,e,o){for(var n in e){var r=e[n];"formData"!==r&&"Content-Type"===n&&(r+=";charset="+o),"Content-Type"===n&&"formData"===r||t.setRequestHeader(n,r)}}(this.xhr,i||{},l),this.xhr.send(x))):(v+="?"+d+"="+f,this.sendJSONP(v)),[2,this.promise]}))},new((i=void 0)||(i=Promise))((function(t,e){function o(t){try{c(a.next(t))}catch(t){e(t)}}function s(t){try{c(a.throw(t))}catch(t){e(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(o,s)}c((a=a.apply(n,r||[])).next())}))},t.options=h,t.cache={},t.cacheCurSize=0,t}();function g(t,e,o){return new j(t,e,o)}}},e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={exports:{}};return t[n](r,r.exports,o),r.exports}return o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o(578)})()}));