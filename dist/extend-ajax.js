!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.extendAjax=e():t.extendAjax=e()}(this,(function(){return(()=>{var t={869:(t,e,o)=>{var n=o(152).Symbol;t.exports=n},756:(t,e,o)=>{var n=o(869),r=o(533),i=o(702),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?r(t):i(t)}},675:(t,e,o)=>{var n="object"==typeof o.g&&o.g&&o.g.Object===Object&&o.g;t.exports=n},533:(t,e,o)=>{var n=o(869),r=Object.prototype,i=r.hasOwnProperty,a=r.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var e=i.call(t,s),o=t[s];try{t[s]=void 0;var n=!0}catch(t){}var r=a.call(t);return n&&(e?t[s]=o:delete t[s]),r}},702:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},152:(t,e,o)=>{var n=o(675),r="object"==typeof self&&self&&self.Object===Object&&self,i=n||r||Function("return this")();t.exports=i},744:t=>{var e=Array.isArray;t.exports=e},363:(t,e,o)=>{var n=o(756),r=o(816);t.exports=function(t){if(!r(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},868:(t,e,o)=>{var n=o(756),r=o(913);t.exports=function(t){return"number"==typeof t||r(t)&&"[object Number]"==n(t)}},816:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},913:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}}},e={};function o(n){var r=e[n];if(void 0!==r)return r.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,o),i.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return(()=>{"use strict";o.r(n),o.d(n,{default:()=>A});var t=o(363),e=o.n(t),r=o(868),i=o.n(r),a=o(816),s=o.n(a),c=o(744),u=o.n(c),p={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript",json:"application/json",text:"text/plain",_default:"*/*"},l={html:"text/html",json:"application/json",file:"multipart/form-data",text:"text/plain",form:"application/x-www-form-urlencoded",_default:"application/x-www-form-urlencoded"},f={timeout:!1,isAsync:!0,header:{Accept:p._default,"Content-Type":l._default},charset:"utf-8",host:"",cacheSize:0,cacheExp:3e5,jsonpName:"jsonpCallback",jsonpParam:"callback",autoAbort:!1};function h(t){if(!/^\w+(-\w+)+/.test(t))return t;var e=t.split("-");return e.forEach((function(t,o){e[o]=t.replace(/^\w/,(function(t){return t.toUpperCase()}))})),e.join("-")}function d(t){for(var e in t){var o=t[e];delete t[e],t[h(e)]=o}}function v(t){for(var e in t){var o=t[e];"Content-Type"===e&&(t[e]=l[o]||o),"Accept"===e&&(t[e]=p[o]||o)}}var y=function(t,e,o){for(var n in void 0===o&&(o=""),e){var r=e[n];null!=r&&(s()(r)||u()(r)?y(t,r,n):t.push({key:o+n,val:r}))}};function m(t){var e=[],o="";return y(e,t),e.sort((function(t,e){return t.key>e.key?1:t.key===e.key?0:-1})),e.forEach((function(t){var e=t.key,n=t.val;o+=e+"="+n})),o}var b={"application/json":function(t){return s()(t)?JSON.stringify(t):""},"text/plain":function(t){return"string"==typeof t?t:""},"application/x-www-form-urlencoded":function(t){if(!s()(t))return"";var e="";for(var o in t){var n=t[o];void 0!==n&&(e+="&"+o+"="+encodeURI(n))}return e.substring(1)},formData:function(t){if(t instanceof FormData)return t;var e=new FormData;if(!s()(t))return e;for(var o in t){var n=t[o];if(n instanceof FileList||Array.isArray(n))for(var r=0;r<n.length;r++)e.append(o,n[r]);else void 0!==n&&e.append(o,n)}return e}};const x=function(t,e,o){return void 0===e&&(e="application/x-www-form-urlencoded"),"get"===o&&(e="text/plain"),l[e]&&(e=l[e]),b[e]?b[e](t):""};var j=[],w="";const g=function(t){var e=window.location.href;w&&e!==w&&j.length&&(j.forEach((function(t){t.abort()})),j=[]),j.push(t),w=e;var o=j.length-1;t.on("end",(function(){j.splice(o,1)}))};var S=function(){return(S=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},C=function(t,e){for(var o=0,n=e.length,r=t.length;o<n;o++,r++)t[r]=e[o];return t},O=window,T=function(){function t(e){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];this.options={},this.events={},this.pool=[];var r={};o[1]?(r=o[1],this.method=o[0]):"string"==typeof o[0]?(this.method=o[0],r={}):(this.method="get",r=o[0]),this.url=e,this.xhr="jsonp"===this.method?null:this.getXHR(),this.options=S(S({},t.options),r),this.options.header&&(d(this.options.header),v(this.options.header))}return t.prototype.verifyCache=function(e,o){return e&&t.options.cacheSize&&(e.exp+e.time<+new Date||t.cacheCurSize>t.options.cacheSize)?(delete t.cache[o],--t.cacheCurSize,!1):!(!e||0===t.options.cacheSize)},t.prototype.addXHREventListener=function(o){var n=this,r=this.options,a=r.convert,s=r.timeout,c=r.query,u=r.header,p={};o.onreadystatechange=function(){var r=o.readyState,l=o.status;if(p.status=l,1===r)return n.emit("start"),void(i()(s)&&(n.timer=window.setTimeout((function(){p.error=new Error("request timeout"),n.emit("timeout")}),s)));if(4===r)if(4===r&&(p.header=function(t){var e=t.getAllResponseHeaders().split("\n"),o={};return e.pop(),e.forEach((function(t){var e=t.replace(" ","").split(":");o[e[0].toLowerCase()]=e[1]})),o}(o),p.data=e()(a)?a(o.responseText):o.responseText),l>=200&&l<300||304===l){var f=m({body:n.data,query:c,header:u,url:n.url});if(!t.cache[f]&&t.options.cacheExp&&t.options.cacheSize&&t.options.cacheSize>0&&(t.cache[f]={res:p,exp:t.options.cacheExp,time:+new Date},++t.cacheCurSize,t.cacheCurSize>t.options.cacheSize)){var h=Object.keys(t.cache)[0];delete t.cache[h]}n.emit("success",p)}else p.error=new Error("request fail:"+l),n.emit("fail",p)}},t.prototype.sendJSONP=function(t){var e=this,o=this.script=document.createElement("script"),n=this.options,r=n.timeout,i=n.jsonpName,a=void 0===i?"jsonpCallback":i;o.src=t,o.type="text/javascript",r&&(this.timer=window.setTimeout((function(){e.timer=o.onload=o.onerror=null,document.body.removeChild(o),e.emit("timeout")}),r)),this.emit("start"),O[a]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];o.setAttribute("data-load","true"),e.emit.apply(e,C(["success"],t)),O[a]=null,clearTimeout(e.timer)},o.onload=function(){o.getAttribute("data-load")||(e.emit("fail"),o.onerror=null,document.body.removeChild(o)),o.onload=null},o.onerror=function(){e.emit("fail"),clearTimeout(e.timer),O[a]=null,document.body.removeChild(o)},document.body.append(o)},t.prototype.getXHR=function(){return this.pool.shift()||new XMLHttpRequest},t.prototype.emit=function(t){for(var e,o,n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(this.promise)switch(t){case"success":null===(e=this.resolve)||void 0===e||e.apply(this.options.scope,r||[]);break;case"fail":null===(o=this.reject)||void 0===o||o.apply(this.options.scope,r||[])}var a=this.events[t];a&&a.forEach((function(t){t.apply(n.options.scope||null,r)}))},t.prototype.on=function(t,e){var o=this.events[t];o?o.push(e):this.events[t]=[e]},t.prototype.send=function(e){return o=this,n=void 0,i=function(){var o,n,r,i,a,s,c,u,p,l,f,h,d,v,y,b,j,w=this;return function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(g){return this.data=e,this.promise=new Promise((function(t,e){w.resolve=t,w.reject=e,w.xhr&&w.addXHREventListener(w.xhr)})),this.emit("beforeSend",this.options),o=this.options,n=o.header,r=o.withCredentials,i=o.isAsync,a=void 0===i||i,s=o.charset,c=void 0===s?"utf-8":s,u=o.jsonpName,p=void 0===u?"jsonpCallback":u,l=o.jsonpParam,f=void 0===l?"callback":l,h=o.host,d=(void 0===h?"":h)+this.url,v=this.options.query,this.xhr?(y=m({body:e,query:v,header:n,url:this.url}),"get"===this.method&&"object"==typeof e&&(v=S(S({},v),e)),b=t.cache[y],this.verifyCache(b,y)?this.emit("success",b.res):(v&&(d+="?"+x(v)),j="get"===this.method?x(e):x(e,n&&n["Content-Type"]),this.xhr.open(this.method,d,a),this.xhr.withCredentials=!!r,function(t,e,o){for(var n in e){var r=e[n];"formData"!==r&&"Content-Type"===n&&(r+=";charset="+o),"Content-Type"===n&&"formData"===r||t.setRequestHeader(n,r)}}(this.xhr,n||{},c),this.xhr.send(j))):(d+="?"+f+"="+p,this.sendJSONP(d)),[2,this.promise]}))},new((r=void 0)||(r=Promise))((function(t,e){function a(t){try{c(i.next(t))}catch(t){e(t)}}function s(t){try{c(i.throw(t))}catch(t){e(t)}}function c(e){var o;e.done?t(e.value):(o=e.value,o instanceof r?o:new r((function(t){t(o)}))).then(a,s)}c((i=i.apply(o,n||[])).next())}));var o,n,r,i},t.prototype.abort=function(){if(this.xhr)this.xhr.abort(),this.emit("abort");else if("jsonp"===this.method){var t=this.options.jsonpName;t&&O[t]&&(O[t]=null),this.script&&(document.body.removeChild(this.script),delete this.script),this.emit("abort")}},t.options=f,t.cache={},t.cacheCurSize=0,t}(),k=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=new(T.bind.apply(T,C([void 0,t],e)));return n.on("beforeSend",(function(t){t.autoAbort&&g(n)})),n};k.config=function(t){Object.assign(T.options,t)};const A=k})(),n})()}));